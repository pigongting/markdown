# 快照测试

## 常见问题
### 是否应该提交快照文件？
是的，所有的快照文件都应该与它们所覆盖的模块及其测试一起提交。它们应该被视为测试的一部分，其价值类似于 Jest 中任何其他断言。实际上，快照表示任何给定时间点的源模块的状态。这样，当源模块被修改时，Jest 可以知道相对于以前的版本什么地方变了。在代码审查期间，它还可以提供大量额外的上下文，让审阅者可以更好地研究您的修改的部分。

### 快照测试仅适用于React组件吗？
React 和 React Native 组件是快照测试的一个很好的用例。但是，快照可以捕获任何可序列化的值，可以被用于以测试输出是否正确为目标的任何时候。Jest 仓库包含了很多测试 Jest 本身输出的示例，包括 Jest 的断言库的输出以及 Jest 代码库各个部分的日志消息。请看 Jest 仓库中的示例 [快照 CLI 输出](https://github.com/facebook/jest/blob/master/integration_tests/__tests__/console.test.js)

### 快照测试和视觉回归测试有什么区别？
快照测试和视觉回归测试是测试UI的两种截然不同的方法，他们服务于不同的目的。视觉回归测试工具对网页进行截图，逐个比较所得到的图像。快照测试是使用 diff 算法，比较存储在文本文件中的序列化的值。有不同的权衡要考虑，我们在 [Jest 博客](http://facebook.github.io/jest/blog/2016/07/27/jest-14.html#why-snapshot-testing) 中列出了构建快照测试的原因。

### 快照测试是否替代单元测试？
快照测试只是 Jest 提供的 20 多条断言之一。快照测试的目的不是取代现有的单元测试，而是提供额外的价值让测试更轻松。在某些情况下，快照测试可能会消除对特定功能集进行单元测试的需要（例如 react 组件），但他们也可以一起工作。

### 快照测试生成文件的速度和大小的性能怎么样？
Jest 已经重写了性能，快照测试也不例外。因为快照存储在文本文件中，所以这种测试方式快速可靠。Jest 为调用 toMatchSnapshot 匹配器的每个测试文件生成一个新文件。快照很小，作为参考，Jest 代码库本身的所有快照文件的大小小于 300 KB。

### 如何解决快照文件中的冲突？
快照文件必须始终代表其覆盖的模块的当前状态。因此，如果您合并两个分支并在快照文件中遇到冲突，您可以手动解决冲突，也可以通过运行 Jest 并检查结果来更新快照文件。

### 测试驱动的开发模式是否可以应用快照测试？
虽然可以手动写入快照文件，但这通常是不可能的。快照有助于弄清测试覆盖的模块的输出是否发生变化，而不是指导设计代码。

### 代码覆盖是否适用于快照测试？
是的，就像任何其他测试一样。
